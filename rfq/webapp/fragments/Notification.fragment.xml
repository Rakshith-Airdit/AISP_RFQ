<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
>
    <Popover
        id="notificationPopover"
        class="sapUiContentPadding"
        placement="Bottom"
        contentHeight="400px"
        contentWidth="375px"
        showHeader="false"
        verticalScrolling="false"
    >
        <NavContainer id="navCon">
            <Page
                id="master"
                title="Messages ({= ${oNotificationsModel>/notifications}.length })"
            >
                <VBox
                    height="100%"
                    width="100%"
                >
                    <!-- <List
                        id="list"
                        items="{oNotificationsModel>/notifications}"
                        growing="true"
                        growingScrollToLoad="true"
                    >
                        <FeedListItem
                            sender="{oNotificationsModel>Author}"
                            icon="{oNotificationsModel>AuthorPicUrl}"
                            iconPress="onNotificationItemPress"
                            info="{oNotificationsModel>Type}"
                            text="{oNotificationsModel>description}"
                            timestamp="{path: 'oNotificationsModel>Date', formatter: '.formatDateTime'}"
                            convertLinksToAnchorTags="All"
                            press="onNavToDetail"
                        >
                            <FeedListItemAction
                                text="{oNotificationsModel>Actions/0/Text}"
                                icon="{oNotificationsModel>Actions/0/Icon}"
                                key="{oNotificationsModel>Actions/0/Key}"
                                press="onActionPressed"
                            />
                        </FeedListItem>
                    </List> -->
                    <List
                        id="list"
                        items="{oNotificationsModel>/notifications}"
                        growing="true"
                        growingScrollToLoad="true"
                    >
                        <StandardListItem
                            title="{oNotificationsModel>Author}"
                            description="{path: 'oNotificationsModel>Date', formatter: '.formatDateTime'}"
                            iconDensityAware="false"
                            counter="1"
                            press="onNavToDetail"
                            type="Navigation"
                        >
                            <!-- info="{oNotificationsModel>Type}" -->
                            <!-- infoState="{= ${oNotificationsModel>Type} === 'Approval' ? 'Success' : 'Warning' }" -->

                            <avatar>
                                <Avatar
                                    src="{oNotificationsModel>AuthorPicUrl}"
                                    displaySize="XL"
                                    displayShape="Circle"
                                    showBorder="false"
                                    backgroundColor="Accent6"
                                />
                            </avatar>
                            <!-- <ObjectAttribute
                                text="{oNotificationsModel>Author}"
                            />
                            <ObjectAttribute
                                text="{path: 'oNotificationsModel>Date', formatter: '.formatDateTime'}"
                            /> -->
                        </StandardListItem>
                    </List>
                </VBox>
            </Page>
            <Page
                id="detail"
                showNavButton="true"
                navButtonPress="onNavBack"
                title="Message"
                enableScrolling="false"
                titleAlignment="Start"
                showFooter="true"
            >
                <content>
                    <FlexBox
                        id="idMainContainer"
                        direction="Column"
                        width="100%"
                        height="100%"
                        justifyContent="Start"
                        fitContainer="true"
                    >
                        <ScrollContainer
                            id="idMessagesScrollContainer"
                            vertical="true"
                            width="100%"
                            height="100%"
                        >
                            <VBox
                                id="idMessagesBox"
                                width="100%"
                            >
                                <!-- Your message content here -->
                                <HBox
                                    id="idUserMsgHBox"
                                    class="sapUiTinyMarginTopBottom"
                                >
                                    <Avatar
                                        id="idUserAvatar"
                                        displayShape="Circle"
                                        displaySize="XS"
                                        initials="U"
                                    />
                                    <MessageStrip
                                        id="idUserMessageStrip"
                                        text="Hi, do you have any questions?"
                                        showIcon="false"
                                    />
                                </HBox>
                                <HBox
                                    id="idHBoxServerMsg"
                                    class="sapUiTinyMarginTopBottom"
                                    justifyContent="End"
                                >
                                    <MessageStrip
                                        id="idServerMessageStrip"
                                        text="Yes, I'd like more info about your services."
                                        showIcon="false"
                                    />
                                    <Avatar
                                        id="idServerAvatar"
                                        displayShape="Circle"
                                        displaySize="XS"
                                        initials="AI"
                                    />
                                </HBox>
                            </VBox>
                        </ScrollContainer>
                    </FlexBox>
                </content>
                <footer>
                    <Toolbar>
                        <FlexBox
                            id="idChatInputRow"
                            justifyContent="SpaceBetween"
                            alignItems="Center"
                            width="100%"
                            class="sapUiResponsiveContentPadding"
                        >
                            <Input
                                id="idUserChatInput"
                                placeholder="Type your message..."
                                width="100%"
                                enabled="{= !${oSubmitStateModel>chatBusy} }"
                            >
                                <layoutData>
                                    <FlexItemData growFactor="1" />
                                </layoutData>
                            </Input>
                            <Button
                                id="idSendChatBtn"
                                icon="sap-icon://paper-plane"
                                type="Emphasized"
                                press=".onSendMessage"
                                enabled="{= !${oSubmitStateModel>/chatBusy} }"
                                busy="{oSubmitStateModel>/chatBusy}"
                                busyIndicatorDelay="0"
                                class="sapUiTinyMarginBegin"
                            />
                        </FlexBox>
                    </Toolbar>

                    <!-- <FeedInput
                            id="idUserChatInput"
                            placeholder="Type your message..."
                            enabled="{= !${oSubmitStateModel>chatBusy} }"
                            showIcon="false"
                            post=".onSendMessage"
                            rows="1"
                        /> -->
                </footer>
            </Page>
        </NavContainer>
    </Popover>
</core:FragmentDefinition>
